Data Maker Repository
========================

## Overview

This is a tool for making data according to specifications. The goal is to separate the structure of the data from the
values that populate it. A single Data Spec could be used to generate JSON, XML, or a csv file. Each field has its own
Field Spec that defines how the values for it should be created.

## Build

To build a command line version of the tool:

```shell script
pyinstaller cli.py --name datamaker --onefile
```

The executable will be located in `dist/datamaker`

## Data Spec

A Data Spec is a Dictionary where the keys are the names of the fields to generate and each value is a Field Spec that
describes how the values for that field are to be generated. There is one reserved key in the root of the Data Spec: refs.
The refs is a special section of the Data Spec where Field Specs are defined but not tied to any specific field.  These
refs can then be used or referenced by other Specs. An example would be a combine Spec which points to two references that
should be joined. Below is an example Data Spec for creating email addresses.

```json
{
  "email": {
    "type": "combine",
    "refs": ["HANDLE", "DOMAINS"],
    "config": { "join_with": "@"}
  },
  "refs": { 
    "HANDLE": {
      "type": "combine",
      "refs": ["ANIMALS", "ACTIONS"],
      "config": { "join_with": "_"}
    },
    "ANIMALS": {
      "type": "values",
      "data": ["zebra", "hedgehog", "llama", "flamingo"]
    },
    "ACTIONS": {
      "type": "values",
      "data": ["fling", "jump", "launch", "dispatch"]
    },
    "DOMAINS": {
      "type": "values",
      "data": ["gmail.com", "yahoo.com", "hotmail.com"]
    } 
  }
}
```

This Data Spec uses two Combine Specs to build up the pieces for the email address.  The first Combine Spec lives in the
Refs section. This one creates the user name or handle by combining the values generated by the ANIMALS Ref with the ACTIONS one.
The email field then combines the HANDLE Ref with the DOMAINS one.

Running datamaker from the command line against this spec:

```shell script
dist/datamaker -s ~/example.json -i 12
zebra_fling@gmail.com
hedgehog_jump@yahoo.com
llama_launch@hotmail.com
flamingo_dispatch@gmail.com
zebra_fling@yahoo.com
hedgehog_jump@hotmail.com
llama_launch@gmail.com
flamingo_dispatch@yahoo.com
zebra_fling@hotmail.com
hedgehog_jump@gmail.com
llama_launch@yahoo.com
flamingo_dispatch@hotmail.com
```

## Field Specs

Each field that should be generated needs a specification that describes the way the values for it should be created. We
refer to this as a Field Spec.  The simplest type of Field Spec is a values spec.  The main format of a values spec is a
list of values to use.  These values are rotated through incrementally.  If the number of increments is larger than the
number of values in the list, the values start over from the beginning of the list. When combining values from two values
providers that are lists, they will be combined in incrementing order. i.e.

```json
{
  "combine": {"type": "combine", "refs":  ["ONE", "TWO"]},
  "refs": {
    "ONE":[ "A", "B", "C"],
    "TWO":[ 1, 2, 3]
  }
}
```

Will produce the values A1, B2, C3 continuously. If an additional number is added to TWO, we now get 12 distict values:

```shell script
dist/datamaker -s ~/scratch/sample.json -i 12 | sort | uniq 
A1
A2
A3
A4
B1
B2
B3
B4
C1
C2
C3
C4
```